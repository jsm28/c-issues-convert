<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>C issue 0163: Is it clear whether the use of an undeclared identifier as a primary expression requires a diagnostic message to be issued?</title>
<style>
pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.hll { background-color: #ffffcc }
.c { color: #3D7B7B; font-style: italic } /* Comment */
.err { border: 1px solid #FF0000 } /* Error */
.k { color: #008000; font-weight: bold } /* Keyword */
.o { color: #666666 } /* Operator */
.ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.cp { color: #9C6500 } /* Comment.Preproc */
.cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.gd { color: #A00000 } /* Generic.Deleted */
.ge { font-style: italic } /* Generic.Emph */
.ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.gr { color: #E40000 } /* Generic.Error */
.gh { color: #000080; font-weight: bold } /* Generic.Heading */
.gi { color: #008400 } /* Generic.Inserted */
.go { color: #717171 } /* Generic.Output */
.gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.gs { font-weight: bold } /* Generic.Strong */
.gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.gt { color: #0044DD } /* Generic.Traceback */
.kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.kp { color: #008000 } /* Keyword.Pseudo */
.kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.kt { color: #B00040 } /* Keyword.Type */
.m { color: #666666 } /* Literal.Number */
.s { color: #BA2121 } /* Literal.String */
.na { color: #687822 } /* Name.Attribute */
.nb { color: #008000 } /* Name.Builtin */
.nc { color: #0000FF; font-weight: bold } /* Name.Class */
.no { color: #880000 } /* Name.Constant */
.nd { color: #AA22FF } /* Name.Decorator */
.ni { color: #717171; font-weight: bold } /* Name.Entity */
.ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.nf { color: #0000FF } /* Name.Function */
.nl { color: #767600 } /* Name.Label */
.nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.nt { color: #008000; font-weight: bold } /* Name.Tag */
.nv { color: #19177C } /* Name.Variable */
.ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.w { color: #bbbbbb } /* Text.Whitespace */
.mb { color: #666666 } /* Literal.Number.Bin */
.mf { color: #666666 } /* Literal.Number.Float */
.mh { color: #666666 } /* Literal.Number.Hex */
.mi { color: #666666 } /* Literal.Number.Integer */
.mo { color: #666666 } /* Literal.Number.Oct */
.sa { color: #BA2121 } /* Literal.String.Affix */
.sb { color: #BA2121 } /* Literal.String.Backtick */
.sc { color: #BA2121 } /* Literal.String.Char */
.dl { color: #BA2121 } /* Literal.String.Delimiter */
.sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.s2 { color: #BA2121 } /* Literal.String.Double */
.se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.sh { color: #BA2121 } /* Literal.String.Heredoc */
.si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.sx { color: #008000 } /* Literal.String.Other */
.sr { color: #A45A77 } /* Literal.String.Regex */
.s1 { color: #BA2121 } /* Literal.String.Single */
.ss { color: #19177C } /* Literal.String.Symbol */
.bp { color: #008000 } /* Name.Builtin.Pseudo */
.fm { color: #0000FF } /* Name.Function.Magic */
.vc { color: #19177C } /* Name.Variable.Class */
.vg { color: #19177C } /* Name.Variable.Global */
.vi { color: #19177C } /* Name.Variable.Instance */
.vm { color: #19177C } /* Name.Variable.Magic */
.il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</head>
<body>
<h2>Issue 0163: Is it clear whether the use of an undeclared identifier as a primary expression requires a diagnostic message to be issued?</h2>
<p><strong>This issue has been automatically converted from the original issue lists and some formatting may not have been preserved.</strong></p>
<p>Authors: Clive D.W. Feather, BSI<br />
Date: 1995-10-16<br />
Submitted against: C90<br />
Status: Closed<br />
Converted from: <a href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/dr.htm">dr.htm</a>, <a href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/dr_163.html">dr_163.html</a></p>
<p><em>Submitted to BSI by Clive D.W. Feather clive@sco.com .</em></p>
<p><em>In this Defect Report, identifiers lexically identical to those declared in
standard headers refer to the identifiers declared in those standard headers,
whether or not the header is explicitly mentioned.</em></p>
<p><em>This Defect Report has been prepared with considerable help from Mark Brader,
Jutta Degener, Ronald Guilmette, and a person whose employment conditions
require anonymity. However, except where stated, opinions expressed or implied
should not be assumed to be those of any person other than myself.</em></p>
<p>Defect Report UK 011: Undeclared identifiers</p>
<p>The C Standard is not clear on whether the use of an undeclared identifier as a
primary expression requires a diagnostic message.</p>
<p>Subclause 6.3.1 states that:</p>
<p>An identifier is a primary expression, provided it has been declared as
designating an object (in which case it is an lvalue) or a function (in which
case it is a function designator).</p>
<p>It has been suggested that if no declaration of some identifier is visible in
the current scope when that identifier appears in an expression, the identifier
is not a primary expression, and therefore the syntax of subclause 6.3.1 is
violated (in other words, there is no valid parse for the expression). This
would thus require a diagnostic for an undeclared identifier.</p>
<p>Is this interpretation correct? If yes, then it needs to be made clear that this
does not prevent a previously undeclared function from being called by a
strictly conforming program (see 6.3.2.2).</p>
<p>If not, does an undeclared identifier require a diagnostic, and if so, why? If
not, is this a deliberate policy, or is it a defect that needs correction?</p>
<hr />
<p>Comment from WG14 on 1997-09-23:</p>
<h3>Response</h3>
<p>Identifiers that designate objects must be declared and be visible before they
can be primary expressions (subclause 6.1.2.1, <em>An identifier is visible (i.e.,
can be used) ...</em>). A reasonable person could interpret that if no declaration
of some identifier is visible, the identifier cannot be a primary expression.
This affects undeclared identifiers that are intended to be used as implicitly
declared functions. The Committee's intent is that the C Standard be read in the
following order:</p>
<p>1. <strong>6.3.1 Primary expressions</strong></p>
<p><strong>Syntax</strong></p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #bbbbbb">          </span>primary<span style="color: #666666">-</span>expression<span style="color: #666666">:</span>
<span style="color: #bbbbbb">                         </span>identifier
</pre></div>

<p>2. <strong>6.3.2.2 Function calls</strong></p>
<p><strong>Semantics</strong></p>
<p>If the expression that precedes the parenthesized argument list in a function
call consists solely of an identifier, and if no declaration is visible for this
identifier, the identifier is implicitly declared exactly as if, in the
innermost block containing the function call, the declaration</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #008000; font-weight: bold">extern</span><span style="color: #bbbbbb"> </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF">identifier</span>();
</pre></div>

<p>appeared.</p>
<p>3. 6.3.1 <strong>Primary expressions</strong></p>
<p><strong>Semantics</strong></p>
<p>An identifier is a primary expression, provided it has been declared as
designating ... a function (...).</p>
<p>However, a reasonable person may not interpret the current wording as having
that meaning (i.e., it might not be read in that order). This needs to be
clarified in the next revision of the C Standard.</p>
<h3>Response</h3>
<p>Identifiers must be declared and visible before they can be primary expressions
(Subclause 6.1.2.1, "An identifier is visible (i.e., can be used) ..."). If no
declaration of some identifier is visible, the identifier cannot be a primary
expression, and a diagnostic is required for a violation of the syntax rule.</p>
<p>Note that a declaration of an identifier might be visible due to the identifier
being implicitly declared (Subclause 6.3.2.2). This should be clarified in the
Standard.</p>
<h3>Future Change</h3>
<p>In Subclause 6.3.1, first paragraph in "Semantics"</p>
<p>Change</p>
<blockquote>
<p>"An identifier is a primary expression, provided is has been declared as
designating an object (in which case it is an lvalue) or a function (in which
case it is a function designator)."</p>
</blockquote>
<p>To</p>
<blockquote>
<p>"An identifier is a primary expression, provided is has been declared as
designating an object (in which case it is an lvalue) or implicitly***** or
explicitly declared as designating a function (in which case it is a function
designator)."</p>
<p>The <strong>*</strong> above references the new footnote:</p>
</blockquote>
<p>"See 6.3.2.2."</p>

</body>
</html>
