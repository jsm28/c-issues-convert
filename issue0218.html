<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>C issue 0218: Signs of non-numeric floating point values</title>
<style>
pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.hll { background-color: #ffffcc }
.c { color: #3D7B7B; font-style: italic } /* Comment */
.err { border: 1px solid #FF0000 } /* Error */
.k { color: #008000; font-weight: bold } /* Keyword */
.o { color: #666666 } /* Operator */
.ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.cp { color: #9C6500 } /* Comment.Preproc */
.cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.gd { color: #A00000 } /* Generic.Deleted */
.ge { font-style: italic } /* Generic.Emph */
.ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.gr { color: #E40000 } /* Generic.Error */
.gh { color: #000080; font-weight: bold } /* Generic.Heading */
.gi { color: #008400 } /* Generic.Inserted */
.go { color: #717171 } /* Generic.Output */
.gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.gs { font-weight: bold } /* Generic.Strong */
.gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.gt { color: #0044DD } /* Generic.Traceback */
.kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.kp { color: #008000 } /* Keyword.Pseudo */
.kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.kt { color: #B00040 } /* Keyword.Type */
.m { color: #666666 } /* Literal.Number */
.s { color: #BA2121 } /* Literal.String */
.na { color: #687822 } /* Name.Attribute */
.nb { color: #008000 } /* Name.Builtin */
.nc { color: #0000FF; font-weight: bold } /* Name.Class */
.no { color: #880000 } /* Name.Constant */
.nd { color: #AA22FF } /* Name.Decorator */
.ni { color: #717171; font-weight: bold } /* Name.Entity */
.ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.nf { color: #0000FF } /* Name.Function */
.nl { color: #767600 } /* Name.Label */
.nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.nt { color: #008000; font-weight: bold } /* Name.Tag */
.nv { color: #19177C } /* Name.Variable */
.ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.w { color: #bbbbbb } /* Text.Whitespace */
.mb { color: #666666 } /* Literal.Number.Bin */
.mf { color: #666666 } /* Literal.Number.Float */
.mh { color: #666666 } /* Literal.Number.Hex */
.mi { color: #666666 } /* Literal.Number.Integer */
.mo { color: #666666 } /* Literal.Number.Oct */
.sa { color: #BA2121 } /* Literal.String.Affix */
.sb { color: #BA2121 } /* Literal.String.Backtick */
.sc { color: #BA2121 } /* Literal.String.Char */
.dl { color: #BA2121 } /* Literal.String.Delimiter */
.sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.s2 { color: #BA2121 } /* Literal.String.Double */
.se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.sh { color: #BA2121 } /* Literal.String.Heredoc */
.si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.sx { color: #008000 } /* Literal.String.Other */
.sr { color: #A45A77 } /* Literal.String.Regex */
.s1 { color: #BA2121 } /* Literal.String.Single */
.ss { color: #19177C } /* Literal.String.Symbol */
.bp { color: #008000 } /* Name.Builtin.Pseudo */
.fm { color: #0000FF } /* Name.Function.Magic */
.vc { color: #19177C } /* Name.Variable.Class */
.vg { color: #19177C } /* Name.Variable.Global */
.vi { color: #19177C } /* Name.Variable.Instance */
.vm { color: #19177C } /* Name.Variable.Magic */
.il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</head>
<body>
<h2>Issue 0218: Signs of non-numeric floating point values</h2>
<p><strong>This issue has been automatically converted from the original issue lists and some formatting may not have been preserved.</strong></p>
<p>Authors: Clive Feather (UK)<br />
Date: 2000-04-04<br />
Submitted against: C99<br />
Status: Fixed<br />
Fixed in: C99 TC2<br />
Converted from: <a href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/summary-c99.htm">summary-c99.htm</a>, <a href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/dr_218.htm">dr_218.htm</a></p>
<h3>Summary</h3>
<p>There is an implication at various points in the standard, notably the copysign
function, that infinities and NaNs have signs. This is not the case in all
implementations, and this needs to be allowed for.</p>
<h3>Suggested Technical Corrigendum</h3>
<p>Add a new paragraph to 5.2.4.2.2, preferably after [#3]:</p>
<blockquote>
<p>[#3a] An implementation may give zero and non-numeric values (such as
infinities and <code>NaNs</code>) a sign or may leave them unsigned. Wherever such values
are unsigned, any requirement in this International Standard to retrieve the
sign shall act as if the value were positive, and any requirement to set the
sign shall be ignored.</p>
</blockquote>
<p>or:</p>
<blockquote>
<p>[...]<br />
to retrieve the sign shall produce an unspecified sign, and any requirement to
set the sign shall be ignored.</p>
</blockquote>
<hr />
<p>Comment from WG14 on 2001-09-18:</p>
<h3>Committee Response</h3>
<p>In addition to the following Technical Corrigendum, add to the Rationale section
that discusses 5.2.4.2.2 of the C Standard:</p>
<blockquote>
<p>The committee has been made aware of at least one implementation (VAX and Alpha
in VAX mode) whose floating-point format does not support signed zeros. The
hardware representation that one thinks would represent -0.0 is in fact treated
as a non-numeric value similar to a NaN. Therefore, <code>copysign(+0.0,-1.0)</code>
returns +0.0, not the expected -0.0, on this implementation. Some places that
mention (or might have) signed zero results and the sign might be different than
you expect:</p>
<p>The complex functions, in particular with branch cuts;</p>
<blockquote>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span>ceil()
conj()
copysign()
fmod()
modf()
fprintf()<span style="color: #bbbbbb"> </span>(Footnote<span style="color: #bbbbbb"> </span><span style="color: #666666">233</span><span style="color: #bbbbbb"> </span>is<span style="color: #bbbbbb"> </span>OK)fwprintf()<span style="color: #bbbbbb"> </span>(Footnote<span style="color: #bbbbbb"> </span><span style="color: #666666">273</span><span style="color: #bbbbbb"> </span>is<span style="color: #bbbbbb"> </span>OK)nearbyint()
nextafter()
nexttoward()
remainder()<span style="color: #bbbbbb"> </span>(Footnote<span style="color: #bbbbbb"> </span><span style="color: #666666">201</span><span style="color: #bbbbbb"> </span>does<span style="color: #bbbbbb"> </span>not<span style="color: #bbbbbb"> </span>need<span style="color: #bbbbbb"> </span>to<span style="color: #bbbbbb"> </span>be<span style="color: #bbbbbb"> </span>changed)remquo()
rint()
round()
signbit()
strtod()<span style="color: #bbbbbb"> </span>(Footnote<span style="color: #bbbbbb"> </span><span style="color: #666666">249</span><span style="color: #bbbbbb"> </span>is<span style="color: #bbbbbb"> </span>OK)trunc()
wcstod()<span style="color: #bbbbbb"> </span>(Footnote<span style="color: #bbbbbb"> </span><span style="color: #666666">285</span><span style="color: #bbbbbb"> </span>is<span style="color: #bbbbbb"> </span>OK)
</pre></div>

</blockquote>
<p>Underflow: In particular: <code>ldexp()</code>, <code>scalbn()</code>, <code>scalbln()</code>.</p>
</blockquote>
<h3>Technical Corrigendum</h3>
<p>Add a new paragraph to 5.2.4.2.2, after [#3]:</p>
<blockquote>
<p>[#3a] An implementation may give zero and non-numeric values (such as
infinities and NaNs) a sign or may leave them unsigned. Wherever such values are
unsigned, any requirement in this International Standard to retrieve the sign
shall produce an unspecified sign, and any requirement to set the sign shall be
ignored.</p>
</blockquote>

</body>
</html>
