<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>C issue 0467: maximum representable finite description vs math</title>
<style>
pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.hll { background-color: #ffffcc }
.c { color: #3D7B7B; font-style: italic } /* Comment */
.err { border: 1px solid #FF0000 } /* Error */
.k { color: #008000; font-weight: bold } /* Keyword */
.o { color: #666666 } /* Operator */
.ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.cp { color: #9C6500 } /* Comment.Preproc */
.cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.gd { color: #A00000 } /* Generic.Deleted */
.ge { font-style: italic } /* Generic.Emph */
.ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.gr { color: #E40000 } /* Generic.Error */
.gh { color: #000080; font-weight: bold } /* Generic.Heading */
.gi { color: #008400 } /* Generic.Inserted */
.go { color: #717171 } /* Generic.Output */
.gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.gs { font-weight: bold } /* Generic.Strong */
.gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.gt { color: #0044DD } /* Generic.Traceback */
.kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.kp { color: #008000 } /* Keyword.Pseudo */
.kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.kt { color: #B00040 } /* Keyword.Type */
.m { color: #666666 } /* Literal.Number */
.s { color: #BA2121 } /* Literal.String */
.na { color: #687822 } /* Name.Attribute */
.nb { color: #008000 } /* Name.Builtin */
.nc { color: #0000FF; font-weight: bold } /* Name.Class */
.no { color: #880000 } /* Name.Constant */
.nd { color: #AA22FF } /* Name.Decorator */
.ni { color: #717171; font-weight: bold } /* Name.Entity */
.ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.nf { color: #0000FF } /* Name.Function */
.nl { color: #767600 } /* Name.Label */
.nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.nt { color: #008000; font-weight: bold } /* Name.Tag */
.nv { color: #19177C } /* Name.Variable */
.ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.w { color: #bbbbbb } /* Text.Whitespace */
.mb { color: #666666 } /* Literal.Number.Bin */
.mf { color: #666666 } /* Literal.Number.Float */
.mh { color: #666666 } /* Literal.Number.Hex */
.mi { color: #666666 } /* Literal.Number.Integer */
.mo { color: #666666 } /* Literal.Number.Oct */
.sa { color: #BA2121 } /* Literal.String.Affix */
.sb { color: #BA2121 } /* Literal.String.Backtick */
.sc { color: #BA2121 } /* Literal.String.Char */
.dl { color: #BA2121 } /* Literal.String.Delimiter */
.sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.s2 { color: #BA2121 } /* Literal.String.Double */
.se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.sh { color: #BA2121 } /* Literal.String.Heredoc */
.si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.sx { color: #008000 } /* Literal.String.Other */
.sr { color: #A45A77 } /* Literal.String.Regex */
.s1 { color: #BA2121 } /* Literal.String.Single */
.ss { color: #19177C } /* Literal.String.Symbol */
.bp { color: #008000 } /* Name.Builtin.Pseudo */
.fm { color: #0000FF } /* Name.Function.Magic */
.vc { color: #19177C } /* Name.Variable.Class */
.vg { color: #19177C } /* Name.Variable.Global */
.vi { color: #19177C } /* Name.Variable.Instance */
.vm { color: #19177C } /* Name.Variable.Magic */
.il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</head>
<body>
<h2>Issue 0467: maximum representable finite description vs math</h2>
<p><strong>This issue has been automatically converted from the original issue lists and some formatting may not have been preserved.</strong></p>
<p>Authors: WG14, Fred J. Tydeman<br />
Date: 2014-09-26<br />
Reference document: <a href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n1870.htm">N1870,</a> <a href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n1871.htm">N1871</a><br />
Submitted against: C11 / C17<br />
Status: Closed<br />
Cross-references: <a href="../c11c17/issue0432.html">0432</a><br />
Converted from: <a href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n2396.htm">n2396.htm</a></p>
<h3>Summary</h3>
<p>formula for maximum representable finite (normalized) floating-point numbers in
5.2.4.2.2#12, and epsilon floating-point numbers in 5.2.4.2.2#13.</p>
<h3>Details</h3>
<p>The math formula is for a normalized number, while the words are missing
'normalized'. Now, in the floating-point model in paragraph 2, the maximum
finite number is the same as the maximum finite normalized number, so it did not
matter.</p>
<p>However, if long double is a pair of doubles (not matching the model in
paragraph 2), then there can be finite numbers larger than the largest
normalized finite number. The largest normalized finite number is
DBL_MAX*(1.+DBL_EPSILON/2.), while the largest finite number can be
DBL_MAX*2.</p>
<p>Also, if long double is a pair of doubles (not matching the model in paragraph
2), then 'least value greater than 1 that is representable in the given floating
point type' is (for double) 1.0+DBL_TRUE_MIN. That makes the difference
DBL_TRUE_MIN, which is not the same at the math formula (b to the power
(1-p)).</p>
<h3>Suggested Technical Corrigendum</h3>
<p>In 5.2.4.2.2#13, add 'normalized' between 'least' and 'value'.</p>
<p>In 5.2.4.2.2#12, add 'normalized' between 'finite' and 'floating-point'.</p>
<p>Add a new paragraph:</p>
<p>12b The values given in the following list shall be replaced by constant
expressions with implementation-defined values that are greater than or equal to
those shown:</p>
<p>-- maximum representable finite floating-point number (footnote),</p>
<ul>
<li><strong>FLT_TRUE_MAX 1E+37</strong></li>
<li><strong>DBL_TRUE_MAX 1E+37</strong></li>
<li><strong>LDBL_TRUE_MAX 1E+37</strong></li>
</ul>
<p>(footnote): Need not be normalized.</p>
<hr />
<p>Comment from WG14 on 2018-10-18:</p>
<p>Oct 2014 meeting</p>
<h3>Committee Discussion</h3>
<blockquote>
<p>The committee accepts the correction of "normalized" but concludes that adding
the suggested macros is a feature and out of scope for a DR.</p>
</blockquote>
<p>Oct 2015 meeting</p>
<h3>Committee Discussion</h3>
<blockquote>
<p>There has been discussion of this Proposed Technical Corrigendum on the WG 14
email reflector starting with <a href="https://www.open-std.org/jtc1/sc22/wg14/13764">(SC22WG14.13764)
LDBL_MAX</a> suggesting that since
<code>double double</code> implementations do not follow (nor are provided by) the IEEE
model that the implementation is free to define additional macros to describe
the behavior as they see fit. To some degree a consensus on LDBL_MAX was
formed, and the following words are provided as food for further committee
thought.</p>
<blockquote>
<p>In 5.2.4.2.2#12, first item change the phrase</p>
<p>maximum representable finite floating-point number, [math formula]</p>
<p>to</p>
<p>maximum representable finite floating-point number; if that value is normalized,
its value is [math formula]</p>
</blockquote>
</blockquote>
<p>Apr 2016 meeting</p>
<h3>Committee Discussion</h3>
<blockquote>
<p>The committee agrees with the reflector discussion.</p>
</blockquote>
<p>Apr 2017 meeting</p>
<h3>Committee Discussion</h3>
<blockquote>
<p>Additional input to the Proposed Technical Corrigendum was suggested and adopted
by the committee from <a href="https://www.open-std.org/jtc1/sc22/wg14/14655">DR 467
PTC</a>.</p>
<p>Further, after discussion, the change from <a href="../c11c17/issue0432.html">DR 432</a> is now viewed as
necessary but not sufficient, and so it will be further reviewed before being
incorporated into a future version of the standard along with these changes.</p>
</blockquote>
<h3>Proposed Change</h3>
<p>In §5.2.4.2.2#1 after the definition of the floating point model parameters,
add:</p>
<blockquote>
<p>For each floating-point type: <em>b</em>, <em>e<sub>min</sub></em>, <em>e<sub>max</sub></em>, <em>p</em> are
fixed constants.</p>
</blockquote>
<p>In §5.2.4.2.2#3 change:</p>
<blockquote>
<p>In addition to normalized floating-point numbers ( <em>f<sub>1</sub></em> &gt; 0 if <em>x</em> ≠
0),</p>
</blockquote>
<p>to:</p>
<blockquote>
<p>In addition to <em>normalized floating-point numbers</em> ( <em>f<sub>1</sub></em> &gt; 0 if <em>x</em>
≠ 0), all possible <em>f<sub>k</sub></em> digits result in values representable in the
type<sup>footnote</sup>.</p>
<p><sup>footnote</sup>: Some implementations may have types with numeric values
which are not covered by this model.</p>
</blockquote>
<p>In 5.2.4.2.2#12, first item change the phrase</p>
<blockquote>
<p>maximum representable finite floating-point number, [ math formula ]</p>
</blockquote>
<p>to</p>
<blockquote>
<p>maximum representable finite floating-point number; if that value is normalized,
its value is [ math formula ],</p>
</blockquote>
<p>In 5.2.4.2.2#13, first item change the phrase</p>
<blockquote>
<p>the difference between 1 and the least value greater than 1</p>
</blockquote>
<p>to</p>
<blockquote>
<p>the difference between 1 and the least normalized value greater than 1</p>
</blockquote>
<p>Oct 2018 meeting</p>
<h3>Committee Response</h3>
<blockquote>
<p>The "C17" edition of the standard has been published as IS 9899:2018.</p>
<p>This issue was not resolved in that publication.</p>
<p>The committee is now considering changes for the next revision of the standard,
and asks that this proposed change and that from <a href="../c11c17/issue0432.html">CR 432</a> be
combined in a new paper to completely resolve this issue.</p>
</blockquote>

</body>
</html>
