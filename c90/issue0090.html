<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>C issue 0090: Multibyte characters in formats question</title>
<style>
pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.hll { background-color: #ffffcc }
.c { color: #3D7B7B; font-style: italic } /* Comment */
.err { border: 1px solid #FF0000 } /* Error */
.k { color: #008000; font-weight: bold } /* Keyword */
.o { color: #666666 } /* Operator */
.ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.cp { color: #9C6500 } /* Comment.Preproc */
.cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.gd { color: #A00000 } /* Generic.Deleted */
.ge { font-style: italic } /* Generic.Emph */
.ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.gr { color: #E40000 } /* Generic.Error */
.gh { color: #000080; font-weight: bold } /* Generic.Heading */
.gi { color: #008400 } /* Generic.Inserted */
.go { color: #717171 } /* Generic.Output */
.gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.gs { font-weight: bold } /* Generic.Strong */
.gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.gt { color: #0044DD } /* Generic.Traceback */
.kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.kp { color: #008000 } /* Keyword.Pseudo */
.kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.kt { color: #B00040 } /* Keyword.Type */
.m { color: #666666 } /* Literal.Number */
.s { color: #BA2121 } /* Literal.String */
.na { color: #687822 } /* Name.Attribute */
.nb { color: #008000 } /* Name.Builtin */
.nc { color: #0000FF; font-weight: bold } /* Name.Class */
.no { color: #880000 } /* Name.Constant */
.nd { color: #AA22FF } /* Name.Decorator */
.ni { color: #717171; font-weight: bold } /* Name.Entity */
.ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.nf { color: #0000FF } /* Name.Function */
.nl { color: #767600 } /* Name.Label */
.nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.nt { color: #008000; font-weight: bold } /* Name.Tag */
.nv { color: #19177C } /* Name.Variable */
.ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.w { color: #bbbbbb } /* Text.Whitespace */
.mb { color: #666666 } /* Literal.Number.Bin */
.mf { color: #666666 } /* Literal.Number.Float */
.mh { color: #666666 } /* Literal.Number.Hex */
.mi { color: #666666 } /* Literal.Number.Integer */
.mo { color: #666666 } /* Literal.Number.Oct */
.sa { color: #BA2121 } /* Literal.String.Affix */
.sb { color: #BA2121 } /* Literal.String.Backtick */
.sc { color: #BA2121 } /* Literal.String.Char */
.dl { color: #BA2121 } /* Literal.String.Delimiter */
.sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.s2 { color: #BA2121 } /* Literal.String.Double */
.se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.sh { color: #BA2121 } /* Literal.String.Heredoc */
.si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.sx { color: #008000 } /* Literal.String.Other */
.sr { color: #A45A77 } /* Literal.String.Regex */
.s1 { color: #BA2121 } /* Literal.String.Single */
.ss { color: #19177C } /* Literal.String.Symbol */
.bp { color: #008000 } /* Name.Builtin.Pseudo */
.fm { color: #0000FF } /* Name.Function.Magic */
.vc { color: #19177C } /* Name.Variable.Class */
.vg { color: #19177C } /* Name.Variable.Global */
.vi { color: #19177C } /* Name.Variable.Instance */
.vm { color: #19177C } /* Name.Variable.Magic */
.il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</head>
<body>
<h2>Issue 0090: Multibyte characters in formats question</h2>
<p><strong>This issue has been automatically converted from the original issue lists and some formatting may not have been preserved.</strong></p>
<p>Authors: Clive Feather, WG14<br />
Date: 1993-12-03<br />
Submitted against: C90<br />
Status: Closed<br />
Converted from: <a href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/dr.htm">dr.htm</a>, <a href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/dr_090.html">dr_090.html</a></p>
<p>Item 27 - multibyte characters in formats</p>
<p>Consider a locale where the characters <code>'\xE'</code> and <code>'\xF'</code> start and end an
alternate shift state (i.e., the latter reverts to the initial shift state), and
where multibyte characters whose first byte is greater than or equal to 0x80 are
two bytes long. The multibyte characters and the alternate shift state
characters are all distinct from the basic execution character set (subclause
5.2.1). What is the output generated by the following <code>fprintf</code> calls?</p>
<blockquote>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #bbbbbb">        </span>fprintf<span style="color: #bbbbbb"> </span>(stdout,<span style="color: #bbbbbb"> </span><span style="color: #BA2121">&quot;Test A: (%d)</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>,<span style="color: #bbbbbb"> </span><span style="color: #666666">42</span>);
<span style="color: #bbbbbb">        </span>fprintf<span style="color: #bbbbbb"> </span>(stdout,<span style="color: #bbbbbb"> </span><span style="color: #BA2121">&quot;Test B: (\xE%d\xF)</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>,<span style="color: #bbbbbb"> </span><span style="color: #666666">42</span>);
<span style="color: #bbbbbb">        </span>fprintf<span style="color: #bbbbbb"> </span>(stdout,<span style="color: #bbbbbb"> </span><span style="color: #BA2121">&quot;Test C: (\xE%\xF&quot;</span><span style="color: #bbbbbb"> </span><span style="color: #BA2121">&quot;d)</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>,<span style="color: #bbbbbb"> </span><span style="color: #666666">42</span>);
<span style="color: #bbbbbb">        </span>fprintf<span style="color: #bbbbbb"> </span>(stdout,<span style="color: #bbbbbb"> </span><span style="color: #BA2121">&quot;Test D: (</span><span style="color: #AA5D1F; font-weight: bold">\xCC</span><span style="color: #BA2121">%d)</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>,<span style="color: #bbbbbb"> </span><span style="color: #666666">42</span>);
<span style="color: #bbbbbb">        </span>fprintf<span style="color: #bbbbbb"> </span>(stdout,<span style="color: #bbbbbb"> </span><span style="color: #BA2121">&quot;Test E: (\xE</span><span style="color: #AA5D1F; font-weight: bold">\xCC</span><span style="color: #BA2121">%d\xF)</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>,<span style="color: #bbbbbb"> </span><span style="color: #666666">42</span>);
<span style="color: #bbbbbb">        </span>fprintf<span style="color: #bbbbbb"> </span>(stdout,<span style="color: #bbbbbb"> </span><span style="color: #BA2121">&quot;Test F: (\xE</span><span style="color: #AA5D1F; font-weight: bold">\xCC</span><span style="color: #BA2121">%\xF&quot;</span><span style="color: #bbbbbb"> </span><span style="color: #BA2121">&quot;d)</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>,<span style="color: #bbbbbb"> </span><span style="color: #666666">42</span>);
</pre></div>

</blockquote>
<hr />
<p>Comment from WG14 on 1997-09-23:</p>
<h3>Response</h3>
<p>The first call contains no locale-specific characters and must produce the
obvious output. The remainder of this response addresses the subsequent calls.</p>
<p>The hypothetical locale is defined such that “the multibyte characters and the
alternate shift state characters are all distinct from the basic execution
character set.” Thus the <code>%</code> character in the string literal is not the same
character as the <code>%</code> that introduces a conversion specification (subclauses
7.9.6.1 and 7.9.6.2) because it is distinct.</p>
<p>The C Standard says, “The format is composed of zero or more directives:
ordinary multibyte characters (not <code>%</code>), which are copied unchanged to the
output stream, ...” Therefore, the output generated by the example <code>fprintf</code>
calls is the format argument copied unchanged to the output stream. Note that
the third argument in each call to <code>fprintf</code> is not needed.</p>

</body>
</html>
