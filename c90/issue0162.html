<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>C issue 0162: Is the description of the static objects used by time.h functions misleading?</title>
<style>
pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.hll { background-color: #ffffcc }
.c { color: #3D7B7B; font-style: italic } /* Comment */
.err { border: 1px solid #FF0000 } /* Error */
.k { color: #008000; font-weight: bold } /* Keyword */
.o { color: #666666 } /* Operator */
.ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.cp { color: #9C6500 } /* Comment.Preproc */
.cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.gd { color: #A00000 } /* Generic.Deleted */
.ge { font-style: italic } /* Generic.Emph */
.ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.gr { color: #E40000 } /* Generic.Error */
.gh { color: #000080; font-weight: bold } /* Generic.Heading */
.gi { color: #008400 } /* Generic.Inserted */
.go { color: #717171 } /* Generic.Output */
.gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.gs { font-weight: bold } /* Generic.Strong */
.gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.gt { color: #0044DD } /* Generic.Traceback */
.kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.kp { color: #008000 } /* Keyword.Pseudo */
.kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.kt { color: #B00040 } /* Keyword.Type */
.m { color: #666666 } /* Literal.Number */
.s { color: #BA2121 } /* Literal.String */
.na { color: #687822 } /* Name.Attribute */
.nb { color: #008000 } /* Name.Builtin */
.nc { color: #0000FF; font-weight: bold } /* Name.Class */
.no { color: #880000 } /* Name.Constant */
.nd { color: #AA22FF } /* Name.Decorator */
.ni { color: #717171; font-weight: bold } /* Name.Entity */
.ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.nf { color: #0000FF } /* Name.Function */
.nl { color: #767600 } /* Name.Label */
.nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.nt { color: #008000; font-weight: bold } /* Name.Tag */
.nv { color: #19177C } /* Name.Variable */
.ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.w { color: #bbbbbb } /* Text.Whitespace */
.mb { color: #666666 } /* Literal.Number.Bin */
.mf { color: #666666 } /* Literal.Number.Float */
.mh { color: #666666 } /* Literal.Number.Hex */
.mi { color: #666666 } /* Literal.Number.Integer */
.mo { color: #666666 } /* Literal.Number.Oct */
.sa { color: #BA2121 } /* Literal.String.Affix */
.sb { color: #BA2121 } /* Literal.String.Backtick */
.sc { color: #BA2121 } /* Literal.String.Char */
.dl { color: #BA2121 } /* Literal.String.Delimiter */
.sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.s2 { color: #BA2121 } /* Literal.String.Double */
.se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.sh { color: #BA2121 } /* Literal.String.Heredoc */
.si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.sx { color: #008000 } /* Literal.String.Other */
.sr { color: #A45A77 } /* Literal.String.Regex */
.s1 { color: #BA2121 } /* Literal.String.Single */
.ss { color: #19177C } /* Literal.String.Symbol */
.bp { color: #008000 } /* Name.Builtin.Pseudo */
.fm { color: #0000FF } /* Name.Function.Magic */
.vc { color: #19177C } /* Name.Variable.Class */
.vg { color: #19177C } /* Name.Variable.Global */
.vi { color: #19177C } /* Name.Variable.Instance */
.vm { color: #19177C } /* Name.Variable.Magic */
.il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</head>
<body>
<h2>Issue 0162: Is the description of the static objects used by <code>time.h</code> functions misleading?</h2>
<p><strong>This issue has been automatically converted from the original issue lists and some formatting may not have been preserved.</strong></p>
<p>Authors: Clive D.W. Feather, BSI<br />
Date: 1995-10-16<br />
Submitted against: C90<br />
Status: Fixed<br />
Fixed in: C99<br />
Converted from: <a href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/dr.htm">dr.htm</a>, <a href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/dr_162.html">dr_162.html</a></p>
<p><em>Submitted to BSI by Clive D.W. Feather clive@sco.com .</em></p>
<p><em>In this Defect Report, identifiers lexically identical to those declared in
standard headers refer to the identifiers declared in those standard headers,
whether or not the header is explicitly mentioned.</em></p>
<p><em>This Defect Report has been prepared with considerable help from Mark Brader,
Jutta Degener, Ronald Guilmette, and a person whose employment conditions
require anonymity. However, except where stated, opinions expressed or implied
should not be assumed to be those of any person other than myself.</em></p>
<p>Defect Report UK 010: <code>gmtime</code> and <code>localtime</code></p>
<p>The C Standard's description of the static objects used by <code>time.h</code> functions is
misleading.</p>
<p>Subclause 7.12.3 reads in part:</p>
<p>these functions return values in one of two static objects: a broken-down time
structure and an array of <code>char</code>. Execution of any of the functions may
overwrite the information returned in either of these objects by any of the
other functions.</p>
<p>Does this mean that, for example, <code>localtime</code> and <code>gmtime</code> must share a single
broken-down time structure, and so the value returned from <code>gmtime</code>, if not a
null pointer, must equal the value returned from <code>localtime</code> (and this value
cannot change during execution of the program)?</p>
<p>The wording <em>the other functions</em> also implies that a call to <code>gmtime</code> can
overwrite a previous call to <code>localtime</code>, but not a previous call to <code>gmtime</code>.
This is clearly ridiculous.</p>
<h3>Suggested Technical Corrigendum</h3>
<p>In subclause 7.12.3, change:</p>
<p>these functions return values in one of two static objects: a broken-down time
structure and an array of <code>char</code>. Execution of any of the functions may
overwrite the information returned in either of these objects by any of the
other functions.</p>
<p>to:</p>
<p>these functions each return a pointer to an object of static storage duration
after assigning a value to it. Execution of any of these functions may overwrite
the information returned in any of these objects by a previous call to any of
these functions.</p>
<hr />
<p>Comment from WG14 on 1997-09-23:</p>
<h3>Future Change</h3>
<p>In subclause 7.12.3, change:</p>
<blockquote>
<p>Except for the <code>strftime</code> function, these functions return values in one of two
static objects: a broken-down time structure and an array of <code>char</code>. Execution
of any of the functions may overwrite the information returned in either of
these objects by any of the other functions.</p>
</blockquote>
<p>to:</p>
<blockquote>
<p>Except for the <code>strftime</code> function, these functions each return a pointer to one
of two types of static objects: a broken-down time structure or an array of
<code>char</code>. Execution of any of the functions that return a pointer to one of these
object types may overwrite the information in any object of the same type
pointed to by the value returned from any previous call to any of them.</p>
</blockquote>

</body>
</html>
