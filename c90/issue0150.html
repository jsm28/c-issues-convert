<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>C issue 0150: Are programs containing char array[] = &quot;Hello, World&quot;; strictly conforming?</title>
<style>
pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.hll { background-color: #ffffcc }
.c { color: #3D7B7B; font-style: italic } /* Comment */
.err { border: 1px solid #FF0000 } /* Error */
.k { color: #008000; font-weight: bold } /* Keyword */
.o { color: #666666 } /* Operator */
.ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.cp { color: #9C6500 } /* Comment.Preproc */
.cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.gd { color: #A00000 } /* Generic.Deleted */
.ge { font-style: italic } /* Generic.Emph */
.ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.gr { color: #E40000 } /* Generic.Error */
.gh { color: #000080; font-weight: bold } /* Generic.Heading */
.gi { color: #008400 } /* Generic.Inserted */
.go { color: #717171 } /* Generic.Output */
.gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.gs { font-weight: bold } /* Generic.Strong */
.gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.gt { color: #0044DD } /* Generic.Traceback */
.kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.kp { color: #008000 } /* Keyword.Pseudo */
.kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.kt { color: #B00040 } /* Keyword.Type */
.m { color: #666666 } /* Literal.Number */
.s { color: #BA2121 } /* Literal.String */
.na { color: #687822 } /* Name.Attribute */
.nb { color: #008000 } /* Name.Builtin */
.nc { color: #0000FF; font-weight: bold } /* Name.Class */
.no { color: #880000 } /* Name.Constant */
.nd { color: #AA22FF } /* Name.Decorator */
.ni { color: #717171; font-weight: bold } /* Name.Entity */
.ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.nf { color: #0000FF } /* Name.Function */
.nl { color: #767600 } /* Name.Label */
.nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.nt { color: #008000; font-weight: bold } /* Name.Tag */
.nv { color: #19177C } /* Name.Variable */
.ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.w { color: #bbbbbb } /* Text.Whitespace */
.mb { color: #666666 } /* Literal.Number.Bin */
.mf { color: #666666 } /* Literal.Number.Float */
.mh { color: #666666 } /* Literal.Number.Hex */
.mi { color: #666666 } /* Literal.Number.Integer */
.mo { color: #666666 } /* Literal.Number.Oct */
.sa { color: #BA2121 } /* Literal.String.Affix */
.sb { color: #BA2121 } /* Literal.String.Backtick */
.sc { color: #BA2121 } /* Literal.String.Char */
.dl { color: #BA2121 } /* Literal.String.Delimiter */
.sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.s2 { color: #BA2121 } /* Literal.String.Double */
.se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.sh { color: #BA2121 } /* Literal.String.Heredoc */
.si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.sx { color: #008000 } /* Literal.String.Other */
.sr { color: #A45A77 } /* Literal.String.Regex */
.s1 { color: #BA2121 } /* Literal.String.Single */
.ss { color: #19177C } /* Literal.String.Symbol */
.bp { color: #008000 } /* Name.Builtin.Pseudo */
.fm { color: #0000FF } /* Name.Function.Magic */
.vc { color: #19177C } /* Name.Variable.Class */
.vg { color: #19177C } /* Name.Variable.Global */
.vi { color: #19177C } /* Name.Variable.Instance */
.vm { color: #19177C } /* Name.Variable.Magic */
.il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</head>
<body>
<h2>Issue 0150: Are programs containing <code>char array[] = "Hello, World";</code> strictly conforming?</h2>
<p><strong>This issue has been automatically converted from the original issue lists and some formatting may not have been preserved.</strong></p>
<p>Authors: Jutta Degener, DIN<br />
Date: 1995-06-11<br />
Submitted against: C90<br />
Status: Fixed<br />
Fixed in: C99<br />
Converted from: <a href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/dr.htm">dr.htm</a>, <a href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/dr_150.html">dr_150.html</a></p>
<p><em>This Defect Report was prepared with considerable help from Mark Brader, Clive
Feather, Ronald Guilmette, and a person whose employment conditions require
anonymity.</em></p>
<p>DIN-001:</p>
<p>According to the current C Standard, programs containing</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #B00040">char</span><span style="color: #bbbbbb"> </span>array[]<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span><span style="color: #BA2121">&quot;Hello, World&quot;</span>;
</pre></div>

<p>are not strictly conforming.</p>
<p>A <strong>Constraint</strong> in subclause 6.5.7 <strong>Initialization</strong>, demands that:</p>
<p>All the expressions in an initializer for an object that has static storage
duration or in an initializer list for an object that has aggregate or union
type shall be constant expressions.</p>
<p>Subclause 6.4 <strong>Constant expressions</strong>, defines various kinds of constant
expression. In its <strong>Semantics</strong> it states that a constant expression in an
initializer evaluates to one of the following:</p>
<p>- an arithmetic constant expression</p>
<p>- a null pointer constant,</p>
<p>- an address constant, or</p>
<p>- an address constant for an object type plus or minus an integral constant
expression.</p>
<p>String literals are neither. A string literal used to initialize a character
array does not decay to a pointer to its first element, according to Subclause
6.2.2.1:</p>
<p>Except when it is the operand of the <code>sizeof</code> operator or the unary <code>&amp;</code>
operator, or is a character string literal used to initialize an array of
character type, or is a wide string literal used to initialize an array with
element type compatible with <code>wchar_t</code>, an lvalue that has type "array of
<em>type</em>" is converted to an expression that has type "pointer to <em>type</em>" that
points to the initial element of the array object and is not an lvalue.</p>
<p>and hence is not an address constant.</p>
<h3>Suggested Technical Corrigendum:</h3>
<p>In subclause 6.5.7, change:</p>
<p>All the expressions in an initializer for an object that has static storage
duration or in an initializer list for an object that has aggregate or union
type shall be constant expressions.</p>
<p>to:</p>
<p>All the expressions in an initializer for an object that has static storage
duration or in an initializer list for an object that has aggregate or union
type shall be constant expressions or string literals.</p>
<hr />
<p>Comment from WG14 on 1997-09-23:</p>
<h3>Suggested Future Change</h3>
<p>In subclause 6.5.7, change:</p>
<p>All the expressions in an initializer for an object that has static storage
duration or in an initializer list for an object that has aggregate or union
type shall be constant expressions.</p>
<p>to:</p>
<p>All the expressions in an initializer for an object that has static storage
duration or in an initializer list for an object that has aggregate or union
type shall be constant expressions or string literals.</p>

</body>
</html>
