<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>C issue 0023: If 99,999 is larger than DBL_MAX_10_EXP, what is the result of strtod(&quot;0.0e99999&quot;, &amp;ptr)?</title>
<style>
pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.hll { background-color: #ffffcc }
.c { color: #3D7B7B; font-style: italic } /* Comment */
.err { border: 1px solid #FF0000 } /* Error */
.k { color: #008000; font-weight: bold } /* Keyword */
.o { color: #666666 } /* Operator */
.ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.cp { color: #9C6500 } /* Comment.Preproc */
.cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.gd { color: #A00000 } /* Generic.Deleted */
.ge { font-style: italic } /* Generic.Emph */
.ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.gr { color: #E40000 } /* Generic.Error */
.gh { color: #000080; font-weight: bold } /* Generic.Heading */
.gi { color: #008400 } /* Generic.Inserted */
.go { color: #717171 } /* Generic.Output */
.gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.gs { font-weight: bold } /* Generic.Strong */
.gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.gt { color: #0044DD } /* Generic.Traceback */
.kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.kp { color: #008000 } /* Keyword.Pseudo */
.kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.kt { color: #B00040 } /* Keyword.Type */
.m { color: #666666 } /* Literal.Number */
.s { color: #BA2121 } /* Literal.String */
.na { color: #687822 } /* Name.Attribute */
.nb { color: #008000 } /* Name.Builtin */
.nc { color: #0000FF; font-weight: bold } /* Name.Class */
.no { color: #880000 } /* Name.Constant */
.nd { color: #AA22FF } /* Name.Decorator */
.ni { color: #717171; font-weight: bold } /* Name.Entity */
.ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.nf { color: #0000FF } /* Name.Function */
.nl { color: #767600 } /* Name.Label */
.nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.nt { color: #008000; font-weight: bold } /* Name.Tag */
.nv { color: #19177C } /* Name.Variable */
.ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.w { color: #bbbbbb } /* Text.Whitespace */
.mb { color: #666666 } /* Literal.Number.Bin */
.mf { color: #666666 } /* Literal.Number.Float */
.mh { color: #666666 } /* Literal.Number.Hex */
.mi { color: #666666 } /* Literal.Number.Integer */
.mo { color: #666666 } /* Literal.Number.Oct */
.sa { color: #BA2121 } /* Literal.String.Affix */
.sb { color: #BA2121 } /* Literal.String.Backtick */
.sc { color: #BA2121 } /* Literal.String.Char */
.dl { color: #BA2121 } /* Literal.String.Delimiter */
.sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.s2 { color: #BA2121 } /* Literal.String.Double */
.se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.sh { color: #BA2121 } /* Literal.String.Heredoc */
.si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.sx { color: #008000 } /* Literal.String.Other */
.sr { color: #A45A77 } /* Literal.String.Regex */
.s1 { color: #BA2121 } /* Literal.String.Single */
.ss { color: #19177C } /* Literal.String.Symbol */
.bp { color: #008000 } /* Name.Builtin.Pseudo */
.fm { color: #0000FF } /* Name.Function.Magic */
.vc { color: #19177C } /* Name.Variable.Class */
.vg { color: #19177C } /* Name.Variable.Global */
.vi { color: #19177C } /* Name.Variable.Instance */
.vm { color: #19177C } /* Name.Variable.Magic */
.il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</head>
<body>
<h2>Issue 0023: If 99,999 is larger than <code>DBL_MAX_10_EXP</code>, what is the result of <code>strtod("0.0e99999", &amp;ptr)</code>?</h2>
<p><strong>This issue has been automatically converted from the original issue lists and some formatting may not have been preserved.</strong></p>
<p>Authors: Fred Tydeman, WG14<br />
Date: 1992-12-10<br />
Reference document: X3J11/91-003<br />
Submitted against: C90<br />
Status: Closed<br />
Cross-references: <a href="../c90/issue0025.html">0025</a><br />
Converted from: <a href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/dr.htm">dr.htm</a>, <a href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/dr_023.html">dr_023.html</a></p>
<p>Assuming that 99999 is larger than <code>DBL_MAX_10_EXP</code>, what is the result of:</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span>strtod(<span style="color: #BA2121">&quot;0.0e99999&quot;</span>,<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;</span>ptr);
</pre></div>

<p>Is it 0.0, <code>HUGE_VAL</code>, or undefined?</p>
<p>Subclause 6.1.3.1 <strong>Floating constants</strong> on page 26, lines 30-32 says: “The
significand part is interpreted as a decimal rational number; the digit sequence
in the exponent part is interpreted as a decimal integer. The exponent indicates
the power of 10 by which the significand part is to be scaled.” In this case
<code>0.0e99999</code> means 0.0 times 10 to the power 99999, or 0.0x10<sup>99999</sup>,
which has a scaled value of 0.0; therefore, return 0.0.</p>
<p>Subclause 7.10.1.4 <strong>The <code>strtod</code> function</strong> on page 151, lines 12-14 says: “If
the correct value is outside the range of representable values, plus or minus
<code>HUGE_VAL</code> is returned (according to the sign of the value), and the value of
the macro <code>ERANGE</code> is stored in <code>errno</code>.” Since the exponent (99999 in this
case) is larger than <code>DBL_MAX_10_EXP</code>, the value is outside the range of
representable values (overflow). Therefore, return <code>HUGE_VAL</code>.</p>
<p>Subclause 5.2.4.2.2 <strong>Characteristics of floating types &lt;<code>float.h&gt;</code></strong>, pages
14-16, describes the model that defines the floating-point types. The number
<code>0.0e99999</code>, as written, is not part of that model (it cannot be represented
since the exponent is larger than <em>e<sub>max</sub></em>). From subclause 6.2.1.4
<strong>Floating types</strong> page 35, lines 11-13, “... if the value being converted is
outside the range of values that can be represented, the behavior is undefined.”
Therefore, since this number, as written, has no representation, the behavior is
undefined.</p>
<hr />
<p>Comment from WG14 on 1997-09-23:</p>
<h3>Response</h3>
<p>According to our response to <a href="../c90/issue0025.html">Defect Report #025, Question 1</a>, the
result of <code>strtod("0.0e99999", &amp;ptr)</code> is exactly representable, i.e., it lies
within the range of representable values. Therefore, by subclause 7.10.1.4,
<strong>Returns</strong>, the value zero shall be returned in this case, and <code>errno</code> shall
not be set. (This means that implementations have to test for the special case
of zero when creating floating-point representations from characters.)</p>
<p>Note also that <code>strtod("0.0e-99999", &amp;ptr)</code> is not a case of underflow, so
<code>errno</code> shall not be set to <code>ERANGE</code> in this case either.</p>

</body>
</html>
