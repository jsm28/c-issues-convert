<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<html>
  <head>
    <meta name="generator" content=
    "HTML Tidy for Windows (vers 1st August 2002), see www.w3.org">

    <title>Defect Report #225</title>
  </head>

  <body>
    <h2 align="center">Defect Report #225</h2>
    <a href="dr_224.htm">Previous Defect Report</a> &lt; - &gt; <a
    href="dr_226.htm">Next Defect Report</a> 

    <p><br>
     <b>Submitter:</b> Bill Plauger (US)<br>
     <b>Submission Date:</b> 2000-04-10<br>
     <b>Source:</b><br>
     <b>Reference Document:</b> N/A<br>
     <b>Version:</b> 1.3<br>
     <b>Date:</b> 2001-09-18 16:08:44<br>
     <b>Subject:</b> <tt><b>strtod</b></tt>, <tt><b>strtof</b></tt>
    and <tt><b>strtold</b></tt> expected form of the subject
    sequence.</p>

    <p><b>Summary</b><br>
     In <tt><b>&lt;stdlib.h&gt;</b></tt>, functions
    <tt><b>strtod</b></tt>, <tt><b>strtof</b></tt>, and
    <tt><b>strtold</b></tt> should permit an implementation to
    recognize either <tt><b>inf</b></tt> or
    <tt><b>infinity</b></tt>, and either <tt><b>nan</b></tt> or
    <tt><b>nan(</b></tt><i>n-char-sequence<small><sub>opt</sub></small></i>
    <tt><b>)</b></tt>, not just one of each.</p>

    <p><b>Suggested Technical Corrigendum</b><br>
     In 7.20.1.3 replace:</p>

    <blockquote>
      <ul>
        <li>one of <tt><b>INF</b></tt> or <tt><b>INFINITY</b></tt>,
        ignoring case</li>

        <li>one of <tt><b>NAN</b></tt> or
        <tt><b>NAN(</b></tt><i>n-char-sequence<small><sub>opt</sub></small></i>
        <tt><b>)</b></tt>, ignoring case in the <tt><b>NAN</b></tt>
        part, where:</li>
      </ul>
    </blockquote>
    with: 

    <blockquote>
      <ul>
        <li>either <tt><b>INF</b></tt> not followed by
        <tt><b>I</b></tt>, or <tt><b>INFINITY</b></tt>, ignoring
        case</li>

        <li>either <tt><b>NAN</b></tt> not followed by a left
        parenthesis, or
        <tt><b>NAN(</b></tt><i>n-char-sequence<small><sub>opt</sub></small></i>
        <tt><b>)</b></tt>, ignoring case in the <tt><b>NAN</b></tt>
        part, where:</li>
      </ul>
    </blockquote>
    <hr>

    <p><b>Committee Discussion</b> (for history only)</p>

    <p>For the functions <tt><b>strtod</b></tt>,
    <tt><b>strtof</b></tt> and <tt><b>strtold</b></tt>, should the
    implementation allow <tt><b>INFI</b></tt> to work as
    <tt><b>INF</b></tt> and leave the pointer at the next
    <tt><b>I</b></tt>, or should it reject a sequence such as
    <tt><b>INFINF</b></tt> as an invalid sequence, that failed at
    the second <tt><b>F</b></tt>.</p>

    <p>The issue concerns what degree of pushback is necessary. But
    these are string functions, not input functions, so they do not
    need push back. Furthermore, 7.19.6.2&para;9 and the associated
    footnote, clearly indicates that there is no requirement for
    the <tt><b>strto*</b></tt> functions to retain symmetric
    functionality with fscanf, indeed that is noted as being
    explicitly different.</p>

    <p>It was noted that while symmetry with <tt><b>scanf</b></tt>
    may have some attractiveness, that the <tt><b>strto*</b></tt>
    functions cannot report that the input string did not match (no
    error mechanism exists) and that it would just return ZERO.
    With scanf the error is reported.</p>

    <p>However, the issue in the DR really reduces to the use of
    the term <i>one of</i> on the bullets in 7.20.1.3&para;3. The
    discussion indicated we were in agreement with Clive Feather's
    comments on this DR.</p>

    <p>It was also observed that these changes also apply to the
    <tt><b>wcsto*</b></tt> functions in 7.24.4.1</p>
    <hr>

    <p><b>Technical Corrigendum</b><br>
    </p>

    <p>Remove the words 'one of' from the third and fourth bullets
    of 7.20.1.3&para;3.</p>

    <p>Remove the words 'one of' from the third and fourth bullets
    of 7.24.4.1&para;3.</p>

    <p><br>
     <a href="dr_224.htm">Previous Defect Report</a> &lt; - &gt; <a
    href="dr_226.htm">Next Defect Report</a></p>
  </body>
</html>

