<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">

<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for Mac OS X (vers 1st December 2004), see www.w3.org">

  <title>Defect report #330</title>
</head>

<body>
  <br>

  <h2 align="center">Defect Report #330</h2><a href=
  "dr_329.htm">Previous Defect Report</a> &lt; - &gt; <a href=
  "dr_331.htm">Next Defect Report</a>

  <p><br>
  <b>Submitter:</b> J11<br>
  <b>Submission Date:</b> 2006-07-18<br>
  <!-- yyyy-mm-dd -->
   <b>Source:</b> Fred J. Tydeman<br>
  <b>Reference Document:</b> <a href=
  "http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1183.htm">N1183</a><br>

  <b>Version:</b> 1.3<br>
  <b>Date:</b> 2007-10-30<br>
  <b>Subject:</b>Externally visible exceptional conditions.</p>

  <p><b>Summary</b></p>

  <p>C99 7.12.1 Treatment of error conditions paragraph 1 has: Each
  function shall execute as if it were a single operation without
  generating any externally visible exceptional conditions.</p>

  <p>As written, I believe that means that <code>errno</code>
  cannot be altered by any math function, nor can any of the
  floating-point exceptions mentioned later in 7.12.1 ("invalid",
  "divide-by-zero", "overflow", "underflow") be raised by any math
  function.</p>

  <p>That was not our intent.</p>

  <p>Seems to me that there are two problems with that text in
  7.12.1:</p>

  <ul>
    <li>It should include the word "spurious".</li>

    <li>It should explicitly exclude the "inexact" floating-point
    exception.</li>
  </ul><br>

  <p><b>Suggested Technical Corrigendum</b><br></p>
  <hr>
  <!-- Entires below the line by WG14 only. -->

  <p><b>Committee Discussion</b></p><br>

  <p>In the Rationale, please add to section 6.5 Expressions, as a
  new paragraph, words along the lines of:</p>

  <blockquote>
    The "inexact" floating-point exception is NOT an exceptional
    condition because "inexact" arises from computing a
    mathematically defined value in the range of representable
    values, therefore, from the definition, "inexact" is not
    exceptional. This matters for spurious exceptional conditions
    in the math library (7.12.1).
  </blockquote>

  <p><b>Proposed Technical Corrigendum</b></p>

  <p>Change 7.12.1 paragraph 1 last sentence to:</p>

  <blockquote>
    Each function shall execute as if it were a single operation
    without generating any of the exceptions "invalid",
    "divide-by-zero", or "overflow" except to reflect the result of
    the function.
  </blockquote>

  <p><br>
  <a href="dr_329.htm">Previous Defect Report</a> &lt; - &gt;
  <a href="dr_331.htm">Next Defect Report</a></p>
</body>
</html>
