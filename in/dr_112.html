<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML><HEAD><TITLE>Defect Report #112</TITLE></HEAD><BODY>
<H2>Defect Report #112</H2>
<B>Submission Date</B>: 03 Dec 93
<BR>
<B>Submittor</B>: WG14
<BR>
<B>Source</B>: Ron Guilmette
<BR>
<B>Question</B>
<BR>
ANSI/ISO C Defect report #rfg19:
<BR>
Subject: Null pointer constants and relational comparisons.
<BR>
a) Does the following code involve usage which requires 
a diagnostic from a conforming implementation?
<BR>
b) Does the following code involve usage which renders 
the code itself not strictly conforming?
<BR>
<TT><B>void test (void *vp)<BR>
	{<BR>
	(vp > (void*)0);	/*</B><I> ? </I><B>*/<BR>
	}
</B></TT><BR>
Background:
<BR>
Subclause 6.2.2.3:
<BLOCKQUOTE>
An integral constant expression with the value 0, or such an 
expression cast to type <TT><B>void *</B></TT>,
is called a <I>null pointer constant.</I> 
If a null pointer constant is assigned to or compared for equality 
to a pointer, the constant is converted to a pointer of that type.
</BLOCKQUOTE>
This last paragraph of subclause 6.2.2.3 seems to suggest
that zero-valued integral constant expressions
which are cast to <TT><B>void *</B></TT> 
(and then called null pointer constants) can <I>only</I> be used in 
assignments and/or equality comparisons, but not in relational comparisons.
<BR>
(It was probably the Committee's intent to permit such expression 
to be used in all ways, and in all contexts where any other
kind of <TT><B>void *</B></TT> 
non-lvalued expressions can be used, but the current wording of subclause 
6.2.2.3 does not make that fact altogether apparent and unambiguous.)
<BR>
<B>Response</B>
<BR>
The code does not require a diagnostic but has undefined behavior, 
so it renders the translation unit not strictly conforming.
Subclause 6.3.8 makes clear that this behavior is undefined.
<BR>
<A HREF="dr_111.html">Previous Defect Report</A>
&lt; - &gt; 
<A HREF="dr_113.html">Next Defect Report</A>
</BODY></HTML>
