<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML><HEAD><TITLE>Defect Report #090</TITLE></HEAD><BODY>
<H2>Defect Report #090</H2>
<B>Submission Date</B>: 03 Dec 93
<BR>
<B>Submittor</B>: WG14
<BR>
<B>Source</B>: Clive Feather
<BR>
<B>Question</B>
<BR>
Item 27 - multibyte characters in formats
<BR>
Consider a locale where the characters <TT><B>'\xE'</B></TT> and <TT><B>'\xF'</B></TT> 
start and end an alternate shift state (i.e., the latter reverts to 
the initial shift state), and where multibyte characters whose first 
byte is greater than or equal to 0x80 are two bytes long. The multibyte 
characters and the alternate shift state characters are all distinct 
from the basic execution character set (subclause 5.2.1). What is 
the output generated by the following <TT><B>fprintf</B></TT> calls?
<BR>
<BLOCKQUOTE><TT><B>	fprintf (stdout, "Test A: (%d)\n", 42);<BR>
	fprintf (stdout, "Test B: (\xE%d\xF)\n", 42);<BR>
	fprintf (stdout, "Test C: (\xE%\xF" "d)\n", 42);<BR>
	fprintf (stdout, "Test D: (\xCC%d)\n", 42);<BR>
	fprintf (stdout, "Test E: (\xE\xCC%d\xF)\n", 42);<BR>
	fprintf (stdout, "Test F: (\xE\xCC%\xF" "d)\n", 42);
</B></TT></BLOCKQUOTE>
<B>Response</B>
<BR>
The first call contains no locale-specific characters and must
produce the obvious output. The remainder of this response
addresses the subsequent calls.
<BR>
The hypothetical locale is defined such that ``the multibyte
characters and the alternate shift state characters are all distinct
from the basic execution character set.'' Thus the <TT><B>%</B></TT>
character in the string literal is not the same character as the
<TT><B>%</B></TT> that introduces a conversion specification
(subclauses 7.9.6.1 and 7.9.6.2) because it is distinct.
<BR>
The C Standard says, ``The format is composed of zero or more
directives: ordinary multibyte characters (not <TT><B>%</B></TT>),
which are copied unchanged to the output stream, ...''
Therefore, the output generated
by the example <TT><B>fprintf</B></TT> calls is the format argument
copied unchanged to the output stream. Note that the third argument
in each call to <TT><B>fprintf</B></TT> is not needed.
<BR>
<A HREF="dr_089.html">Previous Defect Report</A>
&lt; - &gt; 
<A HREF="dr_091.html">Next Defect Report</A>
</BODY></HTML>
