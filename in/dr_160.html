<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0 plus SQ/ICADD Tables//EN" "html.dtd"
>
<HTML><HEAD><TITLE>Defect Report #160</TITLE></HEAD>
<BODY><H2>Defect Report #160</H2> 
<B>Submission Date</B>: 16 Oct 95
<BR>
<B>Submittor</B>: BSI
<BR>
<B>Source</B>: Clive D.W. Feather
<BR>
<B>Question</B>
<BR>
<I>Submitted to BSI by Clive D.W. Feather  clive@sco.com .</I>
<BR>
<I>In this Defect Report, identifiers lexically identical to those 
declared in standard headers refer to the identifiers declared in  those
standard headers, whether or not the header is explicitly mentioned.</I>
<BR>
<I>This Defect Report has been prepared with considerable help from 
Mark Brader, Jutta Degener, Ronald Guilmette, and a person whose
employment  conditions require anonymity. However, except where stated,
opinions  expressed or implied should not be assumed to be those of any
person  other than myself.</I>
<BR> Defect Report UK 008: Reservation of identifiers
<BR> The C Standard is unclear in its description of what applications 
can and cannot do with identifiers that are reserved to the
implementation  for certain uses.
<BR> Subclause 7.1.3 reads in part:
<BR> Each identifier with file scope listed in any of the following 
subclauses (including the future library directions) is reserved for 
use as an identifier with file scope in the same name space if any  of
its associated headers is included.
<BR> Does this include reservation as macros? In particular, is the
following  code:
<BR>
<TT><B>#include  &lt;stddef.h ><BR> #define size_t 42</B><BR></TT> strictly
conforming, or could it cause a redefinition of the macro 
<TT><B>size_t</B></TT>? Similarly, can another macro legitimately
defined by 
<TT><B> stddef.h </B></TT> (such as <TT><B>offsetof</B></TT>)
include <TT><B>size_t</B></TT> in  its replacement list, so that:
<BR>
<TT><B>#include  &lt;stddef.h ><BR> #undef size_t<BR> #define size_t 42</B><BR>
 <B>/*</B> <I>...</I> <B>*/<BR> offsetof (struct_type, field)</B><BR>
</TT> fails to expand correctly? It is not clear how the wording of
Footnote  91 applies, and this is in any case not part of the C Standard
(except  in Australia :-).<BR>
<B> Suggested Future Change</B><BR>
In subclause 7.1.3, Reserved Identifiers, change bullet 2 to:
<BLOCKQUOTE>All identifiers that begin with an underscore are always reseved for use as macros and as identifiers with file scope in both the ordinary and tag name spaces.</BLOCKQUOTE>
Change bullet 5 to:
<BLOCKQUOTE>Each identifier with file scope listed in any of the following subclauses (including the Future library directions) is reserved for use as a macro and as an identifier with file scope in the same name space if any of its associated headers is included.</BLOCKQUOTE>
<A HREF="dr_159.html">Previous Defect Report</A>
&lt; - &gt; 
<A HREF="dr_161.html">Next Defect Report</A>
</BODY></HTML>
